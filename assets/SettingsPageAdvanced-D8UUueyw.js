const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./openai-provider-DAUx-cln.js","./preload-helper-PPVm8Dsz.js","./anthropic-provider-Dm7zUUPs.js"])))=>i.map(i=>d[i]);
import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as N}from"./iframe-Kgc_7zLZ.js";import{I as m}from"./Icon-By9zMJNh.js";import{c as o}from"./rruleset-Bu4wjl4G.js";import{_ as u}from"./preload-helper-PPVm8Dsz.js";import{b,M as k}from"./Motion-CW3vvHgC.js";import{A as y}from"./index-CWxNNgDm.js";async function S(a,l){switch(a){case"gemini":{const{GeminiProvider:r}=await u(async()=>{const{GeminiProvider:s}=await import("./gemini-provider-DDEUKLhQ.js");return{GeminiProvider:s}},[],import.meta.url);return new r(l)}case"openai":{const{OpenAIProvider:r}=await u(async()=>{const{OpenAIProvider:s}=await import("./openai-provider-DAUx-cln.js");return{OpenAIProvider:s}},__vite__mapDeps([0,1]),import.meta.url);return new r({...l,baseUrl:l.baseUrl||"https://api.openai.com/v1",model:l.model||"gpt-4o"})}case"anthropic":{const{AnthropicProvider:r}=await u(async()=>{const{AnthropicProvider:s}=await import("./anthropic-provider-Dm7zUUPs.js");return{AnthropicProvider:s}},__vite__mapDeps([2,1]),import.meta.url);return new r({...l,baseUrl:l.baseUrl||"https://api.anthropic.com",model:l.model||"claude-sonnet-4-20250514"})}case"openai-compatible":{const{OpenAIProvider:r}=await u(async()=>{const{OpenAIProvider:s}=await import("./openai-provider-DAUx-cln.js");return{OpenAIProvider:s}},__vite__mapDeps([0,1]),import.meta.url);return new r(l)}}}async function T(a,l){try{return await(await S(a,l)).test()}catch(r){return{success:!1,message:r instanceof Error?r.message:"Unknown error"}}}const D={gemini:"Gemini",openai:"OpenAI",anthropic:"Anthropic","openai-compatible":"Custom"},O={gemini:{apiKey:"AIza...",baseUrl:"(Default)",model:"gemini-2.0-flash"},openai:{apiKey:"sk-...",baseUrl:"https://api.openai.com/v1",model:"gpt-4o"},anthropic:{apiKey:"sk-ant-...",baseUrl:"https://api.anthropic.com",model:"claude-sonnet-4-20250514"},"openai-compatible":{apiKey:"Your API key",baseUrl:"https://api.deepseek.com/v1",model:"deepseek-chat"}},R=({settings:a,onUpdateSettings:l,availableTags:r})=>{const s=()=>l({...a,voiceConfig:{...a.voiceConfig,enabled:!a.voiceConfig.enabled}}),w=t=>l({...a,voiceConfig:{...a.voiceConfig,activeProvider:t}}),n=(t,d,p)=>{l({...a,voiceConfig:{...a.voiceConfig,providers:{...a.voiceConfig.providers,[t]:{...a.voiceConfig.providers[t],[d]:p}}}})},A=()=>l({...a,aiConfig:{...a.aiConfig,enabled:!a.aiConfig.enabled}}),P=()=>l({...a,aiConfig:{...a.aiConfig,defaultMode:!a.aiConfig.defaultMode}}),I=t=>l({...a,aiConfig:{...a.aiConfig,activeProvider:t}}),h=t=>l({...a,filters:t}),f=t=>l({...a,sort:t}),v=(t,d,p)=>{l({...a,aiConfig:{...a.aiConfig,providers:{...a.aiConfig.providers,[t]:{...a.aiConfig.providers[t],[d]:p}}}})},x=a.aiConfig.providers[a.aiConfig.activeProvider],g=O[a.aiConfig.activeProvider],[i,c]=N.useState(null),[j,C]=N.useState(!1),_=async()=>{C(!0),c(null);const t=await T(a.aiConfig.activeProvider,x);c(t),C(!1)};return e.jsxs("div",{className:"p-6 space-y-8 bg-slate-50/30 dark:bg-slate-900/20",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{name:"Sparkles",size:12,className:"text-blue-500"}),"AI Agent"]}),a.totalTokenUsage>0&&e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-slate-100 dark:bg-slate-800 rounded text-[10px] text-slate-500 font-mono",children:[e.jsx(m,{name:"Cpu",size:10}),e.jsxs("span",{children:[a.totalTokenUsage.toLocaleString()," tokens"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Enable AI Agent"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Allow AI to manage your tasks"})]}),e.jsx("button",{onClick:A,className:o("relative w-10 h-6 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400",a.aiConfig.enabled?"bg-blue-500":"bg-slate-200 dark:bg-slate-700"),children:e.jsx(b,{layout:!0,className:"absolute top-1 left-1 w-4 h-4 bg-white rounded-full shadow-sm block",animate:{x:a.aiConfig.enabled?16:0}})})]}),e.jsx(y,{children:a.aiConfig.enabled&&e.jsxs(k,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-5 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between pl-2 border-l-2 border-slate-200 dark:border-slate-700 ml-1",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Default to AI"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Use AI for all inputs by default"})]}),e.jsx("button",{onClick:P,className:o("relative w-10 h-6 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400",a.aiConfig.defaultMode?"bg-blue-500":"bg-slate-200 dark:bg-slate-700"),children:e.jsx(b,{layout:!0,className:"absolute top-1 left-1 w-4 h-4 bg-white rounded-full shadow-sm block",animate:{x:a.aiConfig.defaultMode?16:0}})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center gap-2 p-1 bg-slate-200 dark:bg-slate-800 rounded-lg",children:["gemini","openai","anthropic","openai-compatible"].map(t=>e.jsx("button",{onClick:()=>I(t),className:o("flex-1 py-1.5 text-[10px] font-bold uppercase rounded-md transition-all",a.aiConfig.activeProvider===t?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"),children:D[t]},t))}),e.jsxs("div",{className:"space-y-3 p-3 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-semibold text-slate-500 uppercase",children:"API Key"}),e.jsx("input",{type:"password",value:x.apiKey,onChange:t=>{v(a.aiConfig.activeProvider,"apiKey",t.target.value),c(null)},className:"w-full px-2 py-1.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded text-xs outline-none focus:border-blue-500 font-mono tracking-wide",placeholder:g.apiKey})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-semibold text-slate-500 uppercase",children:"Model"}),e.jsx("input",{type:"text",value:x.model,onChange:t=>{v(a.aiConfig.activeProvider,"model",t.target.value),c(null)},placeholder:g.model,className:"w-full px-2 py-1.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded text-xs outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] font-semibold text-slate-500 uppercase",children:"Base URL"}),e.jsx("input",{type:"text",value:x.baseUrl,onChange:t=>{v(a.aiConfig.activeProvider,"baseUrl",t.target.value),c(null)},placeholder:g.baseUrl,className:"w-full px-2 py-1.5 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded text-xs outline-none focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[e.jsx("button",{onClick:_,disabled:j,className:o("px-3 py-1.5 text-[10px] font-bold uppercase rounded-md border transition-all",j?"bg-slate-100 border-slate-200 text-slate-400 cursor-wait":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100 hover:border-slate-300"),children:j?"Testing...":"Test Connection"}),i&&e.jsxs("span",{className:o("text-[10px] flex items-center gap-1",i.success?"text-emerald-600":"text-red-500"),children:[e.jsx(m,{name:i.success?"CheckCircle2":"XCircle",size:12}),i.message.length>60?i.message.slice(0,60)+"...":i.message]})]})]})]})]})})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(m,{name:"Filter",size:12,className:"text-blue-500"}),"Advanced Control"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Voice Input"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Enable microphone input"})]}),e.jsx("button",{onClick:s,className:o("relative w-9 h-5 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400",a.voiceConfig.enabled?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700"),children:e.jsx(b,{layout:!0,className:"absolute top-1 left-1 w-3 h-3 bg-white rounded-full shadow-sm block",animate:{x:a.voiceConfig.enabled?16:0}})})]}),a.voiceConfig.enabled&&e.jsxs("div",{className:"pt-2 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 block mb-2",children:"Voice Provider"}),e.jsx("div",{className:"flex bg-slate-200 dark:bg-slate-700 p-1 rounded-lg gap-1",children:["browser","openai","gemini"].map(t=>e.jsx("button",{onClick:()=>w(t),className:o("flex-1 py-1.5 text-[10px] font-bold uppercase rounded-md transition-all",a.voiceConfig.activeProvider===t?"bg-white dark:bg-slate-600 text-blue-600 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"),children:t==="openai"?"OpenAI":t==="gemini"?"Gemini":"Browser"},t))}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1.5",children:[a.voiceConfig.activeProvider==="browser"&&"Uses Web Speech API (free, requires internet in Chrome/Edge)",a.voiceConfig.activeProvider==="openai"&&"OpenAI Whisper (requires API key, highly accurate)",a.voiceConfig.activeProvider==="gemini"&&"Google Gemini (requires API key, supports audio transcription)"]})]}),a.voiceConfig.activeProvider==="openai"&&e.jsxs("div",{className:"space-y-3 pl-3 border-l-2 border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 block mb-1.5",children:"OpenAI API Key"}),e.jsx("input",{type:"password",value:a.voiceConfig.providers.openai.apiKey,onChange:t=>n("openai","apiKey",t.target.value),placeholder:"sk-...",className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 placeholder:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 block mb-1.5",children:"Model"}),e.jsx("input",{type:"text",value:a.voiceConfig.providers.openai.model,onChange:t=>n("openai","model",t.target.value),placeholder:"whisper-1",className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 placeholder:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 block mb-1.5",children:"Base URL (optional)"}),e.jsx("input",{type:"text",value:a.voiceConfig.providers.openai.baseUrl,onChange:t=>n("openai","baseUrl",t.target.value),placeholder:"https://api.openai.com/v1/audio/transcriptions",className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 placeholder:text-slate-400"})]})]}),a.voiceConfig.activeProvider==="gemini"&&e.jsxs("div",{className:"space-y-3 pl-3 border-l-2 border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 block mb-1.5",children:"Gemini API Key"}),e.jsx("input",{type:"password",value:a.voiceConfig.providers.gemini.apiKey,onChange:t=>n("gemini","apiKey",t.target.value),placeholder:"AIza...",className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 placeholder:text-slate-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 block mb-1.5",children:"Model"}),e.jsx("input",{type:"text",value:a.voiceConfig.providers.gemini.model,onChange:t=>n("gemini","model",t.target.value),placeholder:"gemini-1.5-flash",className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 placeholder:text-slate-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 block mb-2",children:"Voice Language"}),e.jsx("input",{type:"text",value:a.voiceConfig.language,onChange:t=>l({...a,voiceConfig:{...a.voiceConfig,language:t.target.value}}),placeholder:"System default",className:"w-full px-3 py-2 text-sm border border-slate-200 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 placeholder:text-slate-400"}),e.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Leave empty for system language. Examples: en-US, zh-CN, ja-JP, es-ES"})]})]})]}),e.jsxs("div",{className:"space-y-3 border-t border-slate-200/50 dark:border-slate-700/50 pt-4",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 block",children:"Tags Filter"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.length===0&&e.jsx("span",{className:"text-xs text-slate-400 italic",children:"No tags found."}),r.map(t=>{const d=a.filters.tags.includes(t);return e.jsx("button",{onClick:()=>{const p=d?a.filters.tags.filter(E=>E!==t):[...a.filters.tags,t];h({...a.filters,tags:p})},className:o("px-2 py-1 text-xs rounded-md border transition-all",d?"bg-blue-100 border-blue-200 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"),children:t},t)})]})]}),e.jsxs("div",{className:"space-y-3 border-t border-slate-200/50 dark:border-slate-700/50 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 block",children:"Script Filter"}),e.jsx("button",{onClick:()=>h({...a.filters,enableScript:!a.filters.enableScript}),className:o("relative w-7 h-4 rounded-full transition-colors focus:outline-none",a.filters.enableScript?"bg-purple-500":"bg-slate-200 dark:bg-slate-700"),children:e.jsx(b,{layout:!0,className:"absolute top-0.5 left-0.5 w-3 h-3 bg-white rounded-full shadow-sm block",animate:{x:a.filters.enableScript?12:0}})})]}),e.jsx(y,{children:a.filters.enableScript&&e.jsxs(k,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:[e.jsx("textarea",{value:a.filters.script,onChange:t=>h({...a.filters,script:t.target.value}),className:"w-full h-28 p-3 bg-[#1e1e1e] text-purple-300 font-mono text-xs rounded-lg border border-slate-700 outline-none resize-none focus:ring-1 focus:ring-purple-500/50 focus:border-purple-500/50 transition-all shadow-inner leading-relaxed",placeholder:"return task.priority === 'high';",spellCheck:!1}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["Var: ",e.jsx("code",{children:"task"}),". Use JS logic to return true/false."]})]})})]}),e.jsxs("div",{className:"space-y-3 border-t border-slate-200/50 dark:border-slate-700/50 pt-4",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 block",children:"Default Sorting"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:a.sort.field,onChange:t=>f({...a.sort,field:t.target.value}),className:"flex-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-200 text-xs rounded-lg px-2 py-1.5 outline-none focus:ring-2 focus:ring-blue-500/20",children:[e.jsx("option",{value:"dueAt",children:"Due Date"}),e.jsx("option",{value:"createdAt",children:"Created Date"}),e.jsx("option",{value:"priority",children:"Priority"}),e.jsx("option",{value:"title",children:"Title"}),e.jsx("option",{value:"custom",children:"Custom Script"})]}),e.jsx("button",{onClick:()=>f({...a.sort,direction:a.sort.direction==="asc"?"desc":"asc"}),className:"px-3 py-1.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:a.sort.direction==="asc"?"ASC":"DESC"})]}),e.jsx(y,{children:a.sort.field==="custom"&&e.jsxs(k,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:[e.jsx("textarea",{value:a.sort.script,onChange:t=>f({...a.sort,script:t.target.value}),className:"w-full h-28 p-3 bg-[#1e1e1e] text-emerald-400 font-mono text-xs rounded-lg border border-slate-700 outline-none resize-none focus:ring-1 focus:ring-emerald-500/50 focus:border-emerald-500/50 transition-all shadow-inner leading-relaxed",placeholder:"return a.title.localeCompare(b.title);",spellCheck:!1}),e.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:["Vars: ",e.jsx("code",{children:"a"}),", ",e.jsx("code",{children:"b"}),". Return -1, 0, 1."]})]})})]})]})]})]})};R.__docgenInfo={description:"",methods:[],displayName:"SettingsPageAdvanced",props:{settings:{required:!0,tsType:{name:"AppSettings"},description:""},onUpdateSettings:{required:!0,tsType:{name:"signature",type:"function",raw:"(s: AppSettings) => void",signature:{arguments:[{type:{name:"AppSettings"},name:"s"}],return:{name:"void"}}},description:""},availableTags:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};export{R as S,S as c};
