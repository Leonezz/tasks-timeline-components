const{expect:f,within:u}=__STORYBOOK_MODULE_TEST__,m=l=>new Promise(s=>setTimeout(s,l));function d(l){return l.querySelector("#tasks-timeline-app")?.shadowRoot||null}function g(l){const s=d(l);if(!s)return console.warn("Shadow root not found, using regular DOM"),u(l);console.log("[withinShadow] Found shadow root, checking content..."),console.log("[withinShadow] Shadow root children:",s.children.length);const h=Array.from(s.querySelectorAll("*")).slice(0,5);console.log("[withinShadow] First few elements:",h.map(t=>{const e=typeof t.className=="string"?t.className.split(" ")[0]:"";return`${t.tagName}${t.id?`#${t.id}`:""}${e?`.${e}`:""}`}));const a=l.ownerDocument?.body,r=t=>{const e=Array.from(s.querySelectorAll(t)),n=a?Array.from(a.querySelectorAll(t)):[];return[...e,...n]};return{...u(document.body),getByPlaceholderText:t=>{const e=r("input, textarea"),n=e.find(i=>{const o=i.getAttribute("placeholder")||"";return t instanceof RegExp?t.test(o):o.toLowerCase().includes(t.toLowerCase())});if(!n)throw new Error(`Unable to find an element with the placeholder text of: ${t}`);return n},getByRole:(t,e)=>{let n=r(`[role="${t}"]`);if(n.length===0&&t==="button"&&(n=r("button")),e?.name){const i=e.name;n=n.filter(o=>{const c=o.textContent||o.getAttribute("aria-label")||o.getAttribute("title")||"";return i instanceof RegExp?i.test(c):c.toLowerCase().includes(i.toLowerCase())})}if(n.length===0)throw new Error(`Unable to find an element with the role: ${t}`);return n[0]},getByText:t=>{const e=r("*"),n=e.find(i=>{const o=i.textContent||"";return t instanceof RegExp?t.test(o):o.includes(t)});if(!n)throw new Error(`Unable to find an element with the text: ${t}`);return n},getByDisplayValue:t=>{const e=r("input, textarea, select"),n=e.find(i=>{const o=i.value||"";return t instanceof RegExp?t.test(o):o===t||o.includes(t)});if(!n)throw new Error(`Unable to find an element with the display value: ${t}`);return n},queryAllByRole:t=>{const e=`[role="${t}"]${t==="button"?", button":""}`;return r(e).filter(Boolean)},getAllByRole:t=>{let e=r(`[role="${t}"]`);return e.length===0&&t==="button"&&(e=r("button")),e.length===0&&t==="checkbox"&&(e=r('input[type="checkbox"]')),e.length===0&&t==="textbox"&&(e=r('input[type="text"], textarea')),e.length===0&&t==="radio"&&(e=r('input[type="radio"]')),e}}}export{m as d,g as w};
