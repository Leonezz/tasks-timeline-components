import{r as u}from"./iframe-gP99-5rX.js";import{l as r}from"./logger-CDMKXnH4.js";const h=(c,a,o)=>{const[f,n]=u.useState(!1),g=u.useCallback(()=>{if(!c)return;const l=window,p=l.SpeechRecognition||l.webkitSpeechRecognition;if(!p){o("Browser does not support voice input.");return}try{r.info("Voice","Starting speech recognition...");const e=new p;e.continuous=!1,e.interimResults=!1,e.lang="en-US",e.onstart=()=>n(!0),e.onend=()=>n(!1),e.onerror=s=>{n(!1);const i=s.error;if(i!=="no-speech")if(i==="not-allowed"){const t="Microphone access denied. Please check permissions.";o(t),r.error("Voice",t)}else if(i==="network"){const t="Network error during voice recognition.";o(t),r.error("Voice",t)}else{const t=`Voice input error: ${i}`;o(t),r.warn("Voice",t)}},e.onresult=s=>{const i=s.results[0]?.[0]?.transcript;i&&(r.info("Voice","Transcript received",{text:i}),a(i))},e.start()}catch(e){console.error("Speech API Error",e),o("Failed to initialize voice input."),r.error("Voice","Initialization failed",e),n(!1)}},[c,a,o,n]);return{isListening:f,start:g}};export{h as u};
