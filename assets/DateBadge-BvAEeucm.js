import{j as e}from"./jsx-runtime-u17CrQMm.js";import{D as d}from"./datetime-CoIMkCUY.js";import{r as l}from"./iframe-BGtqOInk.js";import{I as y}from"./Icon-B2foTpRx.js";import{M as k}from"./Motion-BTKb_TxN.js";import{P as N,a as q,b as w,j as I}from"./popover-CH-wF0B1.js";import{C as O}from"./calendar-C910y9Ol.js";import{c as m}from"./rruleset-Bu4wjl4G.js";const P=({type:a,date:r,label:c,icon:u,className:p,prefix:f="",onUpdate:g,task:h})=>{const[n,x]=l.useState(()=>{if(!r)return;const t=d.fromISO(r);return t.isValid?t.toJSDate():void 0}),[o,b]=l.useState(()=>{if(!r)return"00:00";const t=d.fromISO(r);return t.isValid?t.toFormat("HH:mm"):"00:00"}),i=a==="startAt"||a==="createdAt"||a==="completedAt",D=a.endsWith("At")?a.slice(0,a.length-2).toUpperCase():"",v=t=>{x(t)},j=t=>{b(t.target.value)},T=()=>{let t="";if(n){let s=d.fromJSDate(n);if(i&&o){const[A,S]=o.split(":").map(Number);s=s.set({hour:A,minute:S})}t=i?s.toISO()||"":s.toISODate()||""}g({...h,[a==="dueDate"?"dueAt":a]:t})},C={dueDate:"Change Due Date",startAt:"Change Start Date",createdAt:"Change Created Date",completedAt:"Change Completed Date"};return e.jsxs(N,{children:[e.jsx(q,{asChild:!0,children:e.jsxs("button",{className:p,title:C[a],children:[e.jsx(y,{name:u,size:10,className:"shrink-0"}),e.jsxs("span",{className:"font-mono truncate",children:[f,c]})]})}),e.jsx(w,{side:"bottom",align:"start",sideOffset:4,className:"z-9999 outline-none w-auto p-0",children:e.jsxs(k,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[e.jsx(O,{mode:"single",selected:n,onSelect:v}),i&&e.jsxs("div",{className:"border-t border-border px-3 py-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1 block",children:"Time"}),e.jsx("input",{type:"time",value:o,onChange:j,className:m("w-full px-3 py-2 bg-background border border-input rounded-md text-sm","focus:ring-2 focus:ring-ring focus:border-ring outline-none")})]}),e.jsx("div",{className:"border-t border-border p-2",children:e.jsx(I,{asChild:!0,children:e.jsxs("button",{onClick:T,className:m("w-full text-primary text-xs font-semibold py-2 rounded-md","hover:bg-accent transition-colors"),children:["Save ",D," date"]})})})]})})]})};P.__docgenInfo={description:"",methods:[],displayName:"DateBadge",props:{task:{required:!0,tsType:{name:"Task"},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(task: Task) => void",signature:{arguments:[{type:{name:"Task"},name:"task"}],return:{name:"void"}}},description:""},type:{required:!0,tsType:{name:"union",raw:'"dueDate" | "startAt" | "createdAt" | "completedAt"',elements:[{name:"literal",value:'"dueDate"'},{name:"literal",value:'"startAt"'},{name:"literal",value:'"createdAt"'},{name:"literal",value:'"completedAt"'}]},description:""},date:{required:!1,tsType:{name:"string"},description:""},label:{required:!0,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"unknown"},description:""},className:{required:!0,tsType:{name:"string"},description:""},prefix:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};export{P as D};
