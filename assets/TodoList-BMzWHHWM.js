import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as G}from"./iframe-z1DTTm3g.js";import{D as h}from"./tasks-BV5_RF93.js";import"./index-goBt61iM.js";import{g as S,B as j}from"./BacklogSection-CB8bSMtm.js";import{Y as D}from"./YearSection-Dfbtfe4q.js";import{D as A}from"./DaySection-DpYpSlUD.js";import{u as N,a as v}from"./SettingsContext-jvBEm_-X.js";const Y=({className:x})=>{const{tasks:o}=N(),{settings:s,isFocusMode:r}=v(),{todayGroup:d,otherYearGroups:m,backlogTasks:l}=G.useMemo(()=>{const n=h.now(),p=n.toISODate(),k=s.showCompleted?o:o.filter(t=>t.status!=="done"&&t.status!=="cancelled"),g=[],y=[],T=["dueAt","startAt","createdAt","completedAt"];k.forEach(t=>{T.some(a=>{const i=t[a];return i&&h.fromISO(i).isValid})?g.push(t):y.push(t)});const b=S(g,s.groupingStrategy);let f=null;const c=[];for(const t of b){const u=t.dayGroups.find(a=>a.date===p);if(u){f=u;const a=t.dayGroups.filter(i=>i.date!==p);a.length>0&&c.push({...t,dayGroups:a})}else c.push(t)}return{todayGroup:f||{date:p,tasks:[]},otherYearGroups:c,backlogTasks:y}},[o,s.showCompleted,s.groupingStrategy]);return e.jsxs("div",{className:x,children:[e.jsxs("div",{className:"mb-5 pb-3 border-b-2 border-dashed border-slate-100/80",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 pl-2 opacity-60",children:e.jsxs("span",{className:"text-[10px] font-bold font-mono uppercase tracking-widest text-slate-400",children:["Current Focus",s.groupingStrategy.length===1&&s.groupingStrategy[0]!=="dueAt"?` (${s.groupingStrategy[0].replace("At","").replace("Date","")})`:""]})}),e.jsx(A,{group:d})]}),!r&&m.map(n=>e.jsx(D,{group:n},n.year)),!r&&l.length>0&&e.jsx(j,{tasks:l}),!r&&m.length===0&&o.length>0&&!d.tasks.length&&l.length===0&&e.jsx("div",{className:"text-center text-slate-400 text-sm py-10",children:"No tasks visible based on current filters."}),r&&!d.tasks.length&&e.jsx("div",{className:"text-center text-slate-400 text-sm py-10",children:"Focus mode is on. No tasks for today."})]})};Y.__docgenInfo={description:"",methods:[],displayName:"TodoList",props:{className:{required:!1,tsType:{name:"string"},description:""}}};export{Y as T};
