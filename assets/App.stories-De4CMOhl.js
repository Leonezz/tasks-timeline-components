import{j as u}from"./jsx-runtime-u17CrQMm.js";import{r as A}from"./iframe-BGtqOInk.js";import{T as Pt}from"./TodoList-BFOx4VWg.js";import{I as Rt}from"./InputBar-BHIS8_OU.js";import{S as Bt}from"./SettingsModal-CRwOo0Le.js";import{T as qt}from"./TaskEditModal-DC8rEjQz.js";import{T as _t}from"./Toast-BQU3buBw.js";import{c as ae}from"./rruleset-Bu4wjl4G.js";import{d as lt}from"./BacklogSection-bp20aMWt.js";import{l as k}from"./logger-CDMKXnH4.js";import{I as Pe}from"./Icon-B2foTpRx.js";import{A as Lt}from"./AppContext-MBozJVKD.js";import{T as Yt,S as Vt}from"./SettingsContext-DkX_1huq.js";import{M as gt}from"./Motion-BTKb_TxN.js";import{g as kt,a as $t}from"./TaskItem-DFdCcC3W.js";import{c as Gt}from"./SettingsPageAdvanced-BdwnyL6e.js";import{A as Kt}from"./index-CNQ5PkYJ.js";import{w as Z,d as ee}from"./test-utils-BNouzmjp.js";import{t as Wt}from"./tasks-D2syl_55.js";import"./preload-helper-PPVm8Dsz.js";import"./datetime-CoIMkCUY.js";import"./YearSection-DT9O5NBl.js";import"./DaySection-BNw5Suiv.js";import"./useVoiceInput-CjoFeMCS.js";import"./collapsible-lBPQBf1S.js";import"./popover-CH-wF0B1.js";import"./index-gL42gEsK.js";import"./index-DSbOtjD6.js";import"./proxy-DEXR2x0b.js";import"./SettingsPage-BfSpbDIO.js";import"./SettingsPageGeneral-DL4YTrBo.js";import"./index-DXBVteFj.js";import"./date-picker-CdjFAMNN.js";import"./calendar-C910y9Ol.js";import"./chevron-right-BYj65MRz.js";import"./DateBadge-BvAEeucm.js";import"./TagBadge-Dgc43Bxf.js";import"./PriorityPopover-Dx7L7z7o.js";import"./CategoryPopover-CHRjnc_g.js";const zt=A.createContext(null),Ge={didCatch:!1,error:null};class Ke extends A.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Ge}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(...t){const{error:s}=this.state;s!==null&&(this.props.onReset?.({args:t,reason:"imperative-api"}),this.setState(Ge))}componentDidCatch(t,s){this.props.onError?.(t,s)}componentDidUpdate(t,s){const{didCatch:n}=this.state,{resetKeys:r}=this.props;n&&s.error!==null&&Xt(t.resetKeys,r)&&(this.props.onReset?.({next:r,prev:t.resetKeys,reason:"keys"}),this.setState(Ge))}render(){const{children:t,fallbackRender:s,FallbackComponent:n,fallback:r}=this.props,{didCatch:i,error:a}=this.state;let o=t;if(i){const p={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof s=="function")o=s(p);else if(n)o=A.createElement(n,p);else if(r!==void 0)o=r;else throw a}return A.createElement(zt.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},o)}}function Xt(e=[],t=[]){return e.length!==t.length||e.some((s,n)=>!Object.is(s,t[n]))}const Ht=()=>[{name:"create_task",description:"Creates a new task with given properties.",parameters:{type:"object",properties:{title:{type:"string",description:"The title of the task."},description:{type:"string",description:"Additional details about the task."},priority:{type:"string",description:"Task priority: low, medium, or high.",enum:["low","medium","high"]},dueAt:{type:"string",description:"ISO 8601 date string (YYYY-MM-DD)."},category:{type:"string",description:"The organizational category."},tags:{type:"array",items:{type:"string"},description:"A list of tag names."}},required:["title"]}},{name:"query_tasks",description:"Queries existing tasks based on filters.",parameters:{type:"object",properties:{status:{type:"string",description:"Filter by task status.",enum:["done","scheduled","todo","due","overdue","cancelled","unplanned","doing"]},date:{type:"string",description:"Filter by date (YYYY-MM-DD)."},search:{type:"string",description:"Search term for task title."}}}},{name:"update_task",description:"Updates properties of an existing task.",parameters:{type:"object",properties:{id:{type:"string",description:"The unique ID of the task to update."},title:{type:"string"},description:{type:"string"},status:{type:"string",enum:["done","scheduled","todo","due","overdue","cancelled","unplanned","doing"]},priority:{type:"string",enum:["low","medium","high"]},dueAt:{type:"string"},category:{type:"string"},tags:{type:"array",items:{type:"string"}}},required:["id"]}},{name:"delete_task",description:"Deletes a task by its ID.",parameters:{type:"object",properties:{id:{type:"string",description:"The ID of the task to delete."}},required:["id"]}}],Qt=(e,t)=>{let s=`You are a task management assistant. You help users create, query, update, and delete tasks.

## Task Schema
Tasks have these fields:
- title (string, required): The task name
- description (string): Additional details
- status: One of "todo", "doing", "done", "cancelled" (set explicitly), or derived: "overdue", "due", "scheduled", "unplanned"
- priority: "low", "medium", or "high"
- dueAt (string): Due date in YYYY-MM-DD format
- startAt (string): Start date in YYYY-MM-DD format
- category (string): Organizational category
- tags (array of strings): Tag labels

## Status Rules
- "done" and "cancelled" are terminal states, set explicitly
- "overdue", "due", "scheduled", "doing", "unplanned" are derived from dates automatically
- When creating tasks, set status to "todo" — the system derives the display status

## Date Handling
- Always use YYYY-MM-DD format for dates
- Today is ${kt()}
- Interpret relative dates: "tomorrow", "next week", "in 3 days", etc.

## Tool Usage
- ALWAYS use query_tasks first before updating or deleting tasks to get their IDs
- When asked to modify tasks by criteria (e.g., "all tasks due next week"), query first
- Confirm what you did after each action

## Response Style
- Be concise and helpful
- After performing actions, briefly confirm what was done
- If a request is ambiguous, ask for clarification`;return e&&(s+=`

## Host Application Context
${e}`),t&&(s+=`

## User Instructions
${t}`),s};class Jt{name="Local Browser Settings";settingsKey="tasks_timeline_settings_data";settingsSaveTimeout=null;async loadSettings(){const t=localStorage.getItem(this.settingsKey);if(!t)return null;try{const s=JSON.parse(t);return k.debug("Storage","Loaded settings from local storage."),s}catch(s){return k.error("Storage","Failed to parse settings",s),null}}async saveSettings(t){return this.settingsSaveTimeout&&window.clearTimeout(this.settingsSaveTimeout),new Promise(s=>{this.settingsSaveTimeout=window.setTimeout(()=>{try{localStorage.setItem(this.settingsKey,JSON.stringify(t)),k.debug("Storage","Persisted settings."),this.settingsSaveTimeout=null,s()}catch(n){k.error("Storage","Failed to save settings",n),s()}},500)})}}const Xe=e=>e instanceof Error?e.message:typeof e=="string"?e:"An unknown error occurred",yt=({error:e,resetErrorBoundary:t})=>u.jsxs(gt,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-8 text-center space-y-4 max-w-md mx-auto",children:[u.jsx("div",{className:"text-rose-500 flex justify-center",children:u.jsx(Pe,{name:"AlertTriangle",size:48})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Something went wrong"}),u.jsx("p",{className:"text-sm text-slate-600 mt-2 font-mono bg-slate-50 p-3 rounded border border-slate-200",children:Xe(e)})]}),u.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:"Try Again"})]}),Tt=({error:e,resetErrorBoundary:t})=>u.jsx(gt,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"p-4 bg-rose-50 border border-rose-200 rounded-lg mx-4 mb-4",children:u.jsxs("div",{className:"flex items-start gap-3",children:[u.jsx("div",{className:"text-rose-600 mt-0.5",children:u.jsx(Pe,{name:"AlertCircle",size:20})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-semibold text-rose-900 text-sm",children:"AI Command Failed"}),u.jsx("p",{className:"text-sm text-rose-700 mt-1",children:Xe(e)}),u.jsx("button",{onClick:t,className:"text-xs text-rose-600 underline mt-2 hover:text-rose-800",children:"Dismiss"})]})]})}),vt=({error:e,resetErrorBoundary:t})=>u.jsxs("div",{className:"p-6 text-center space-y-4",children:[u.jsx("div",{className:"text-rose-500 flex justify-center",children:u.jsx(Pe,{name:"XCircle",size:40})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-base text-slate-900",children:"Failed to load modal"}),u.jsx("p",{className:"text-xs text-slate-600 mt-2 font-mono bg-slate-50 p-2 rounded border border-slate-200",children:Xe(e)})]}),u.jsx("button",{onClick:t,className:"px-3 py-1.5 text-sm bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})]});yt.__docgenInfo={description:"",methods:[],displayName:"TaskListErrorFallback"};Tt.__docgenInfo={description:"",methods:[],displayName:"AIErrorFallback"};vt.__docgenInfo={description:"",methods:[],displayName:"ModalErrorFallback"};var q="INUMBER",ue="IOP1",ce="IOP2",pe="IOP3",G="IVAR",J="IVARNAME",ie="IFUNCALL",Re="IFUNDEF",P="IEXPR",He="IEXPREVAL",te="IMEMBER",Be="IENDSTATEMENT",le="IARRAY";function y(e,t){this.type=e,this.value=t??0}y.prototype.toString=function(){switch(this.type){case q:case ue:case ce:case pe:case G:case J:case Be:return this.value;case ie:return"CALL "+this.value;case Re:return"DEF "+this.value;case le:return"ARRAY "+this.value;case te:return"."+this.value;default:return"Invalid Instruction"}};function qe(e){return new y(ue,e)}function W(e){return new y(ce,e)}function wt(e){return new y(pe,e)}function ze(e,t,s,n,r){for(var i=[],a=[],o,p,h,f,w=0;w<e.length;w++){var l=e[w],d=l.type;if(d===q||d===J)Array.isArray(l.value)?i.push.apply(i,ze(l.value.map(function(j){return new y(q,j)}).concat(new y(le,l.value.length)),t,s,n,r)):i.push(l);else if(d===G&&r.hasOwnProperty(l.value))l=new y(q,r[l.value]),i.push(l);else if(d===ce&&i.length>1)p=i.pop(),o=i.pop(),f=s[l.value],l=new y(q,f(o.value,p.value)),i.push(l);else if(d===pe&&i.length>2)h=i.pop(),p=i.pop(),o=i.pop(),l.value==="?"?i.push(o.value?p.value:h.value):(f=n[l.value],l=new y(q,f(o.value,p.value,h.value)),i.push(l));else if(d===ue&&i.length>0)o=i.pop(),f=t[l.value],l=new y(q,f(o.value)),i.push(l);else if(d===P){for(;i.length>0;)a.push(i.shift());a.push(new y(P,ze(l.value,t,s,n,r)))}else if(d===te&&i.length>0)o=i.pop(),i.push(new y(q,o.value[l.value]));else{for(;i.length>0;)a.push(i.shift());a.push(l)}}for(;i.length>0;)a.push(i.shift());return a}function xt(e,t,s){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i.type;if(a===G&&i.value===t)for(var o=0;o<s.tokens.length;o++){var p=s.tokens[o],h;p.type===ue?h=qe(p.value):p.type===ce?h=W(p.value):p.type===pe?h=wt(p.value):h=new y(p.type,p.value),n.push(h)}else a===P?n.push(new y(P,xt(i.value,t,s))):n.push(i)}return n}function Q(e,t,s){var n=[],r,i,a,o,p,h;if(Qe(e))return $(e,s);for(var f=e.length,w=0;w<f;w++){var l=e[w],d=l.type;if(d===q||d===J)n.push(l.value);else if(d===ce)i=n.pop(),r=n.pop(),l.value==="and"?n.push(r?!!Q(i,t,s):!1):l.value==="or"?n.push(r?!0:!!Q(i,t,s)):l.value==="="?(o=t.binaryOps[l.value],n.push(o(r,Q(i,t,s),s))):(o=t.binaryOps[l.value],n.push(o($(r,s),$(i,s))));else if(d===pe)a=n.pop(),i=n.pop(),r=n.pop(),l.value==="?"?n.push(Q(r?i:a,t,s)):(o=t.ternaryOps[l.value],n.push(o($(r,s),$(i,s),$(a,s))));else if(d===G)if(l.value in t.functions)n.push(t.functions[l.value]);else if(l.value in t.unaryOps&&t.parser.isOperatorEnabled(l.value))n.push(t.unaryOps[l.value]);else{var j=s[l.value];if(j!==void 0)n.push(j);else throw new Error("undefined variable: "+l.value)}else if(d===ue)r=n.pop(),o=t.unaryOps[l.value],n.push(o($(r,s)));else if(d===ie){for(h=l.value,p=[];h-- >0;)p.unshift($(n.pop(),s));if(o=n.pop(),o.apply&&o.call)n.push(o.apply(void 0,p));else throw new Error(o+" is not a function")}else if(d===Re)n.push((function(){for(var g=n.pop(),T=[],B=l.value;B-- >0;)T.unshift(n.pop());var E=n.pop(),I=function(){for(var Y=Object.assign({},s),M=0,L=T.length;M<L;M++)Y[T[M]]=arguments[M];return Q(g,t,Y)};return Object.defineProperty(I,"name",{value:E,writable:!1}),s[E]=I,I})());else if(d===P)n.push(Zt(l,t));else if(d===He)n.push(l);else if(d===te)r=n.pop(),n.push(r[l.value]);else if(d===Be)n.pop();else if(d===le){for(h=l.value,p=[];h-- >0;)p.unshift(n.pop());n.push(p)}else throw new Error("invalid Expression")}if(n.length>1)throw new Error("invalid Expression (parity)");return n[0]===0?0:$(n[0],s)}function Zt(e,t,s){return Qe(e)?e:{type:He,value:function(n){return Q(e.value,t,n)}}}function Qe(e){return e&&e.type===He}function $(e,t){return Qe(e)?e.value(t):e}function Je(e,t){for(var s=[],n,r,i,a,o,p,h=0;h<e.length;h++){var f=e[h],w=f.type;if(w===q)typeof f.value=="number"&&f.value<0?s.push("("+f.value+")"):Array.isArray(f.value)?s.push("["+f.value.map(dt).join(", ")+"]"):s.push(dt(f.value));else if(w===ce)r=s.pop(),n=s.pop(),a=f.value,t?a==="^"?s.push("Math.pow("+n+", "+r+")"):a==="and"?s.push("(!!"+n+" && !!"+r+")"):a==="or"?s.push("(!!"+n+" || !!"+r+")"):a==="||"?s.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+n+"),("+r+")))"):a==="=="?s.push("("+n+" === "+r+")"):a==="!="?s.push("("+n+" !== "+r+")"):a==="["?s.push(n+"[("+r+") | 0]"):s.push("("+n+" "+a+" "+r+")"):a==="["?s.push(n+"["+r+"]"):s.push("("+n+" "+a+" "+r+")");else if(w===pe)if(i=s.pop(),r=s.pop(),n=s.pop(),a=f.value,a==="?")s.push("("+n+" ? "+r+" : "+i+")");else throw new Error("invalid Expression");else if(w===G||w===J)s.push(f.value);else if(w===ue)n=s.pop(),a=f.value,a==="-"||a==="+"?s.push("("+a+n+")"):t?a==="not"?s.push("(!"+n+")"):a==="!"?s.push("fac("+n+")"):s.push(a+"("+n+")"):a==="!"?s.push("("+n+"!)"):s.push("("+a+" "+n+")");else if(w===ie){for(p=f.value,o=[];p-- >0;)o.unshift(s.pop());a=s.pop(),s.push(a+"("+o.join(", ")+")")}else if(w===Re){for(r=s.pop(),p=f.value,o=[];p-- >0;)o.unshift(s.pop());n=s.pop(),t?s.push("("+n+" = function("+o.join(", ")+") { return "+r+" })"):s.push("("+n+"("+o.join(", ")+") = "+r+")")}else if(w===te)n=s.pop(),s.push(n+"."+f.value);else if(w===le){for(p=f.value,o=[];p-- >0;)o.unshift(s.pop());s.push("["+o.join(", ")+"]")}else if(w===P)s.push("("+Je(f.value,t)+")");else if(w!==Be)throw new Error("invalid Expression")}return s.length>1&&(t?s=[s.join(",")]:s=[s.join(";")]),String(s[0])}function dt(e){return typeof e=="string"?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function oe(e,t){for(var s=0;s<e.length;s++)if(e[s]===t)return!0;return!1}function Ze(e,t,s){s=s||{};for(var n=!!s.withMembers,r=null,i=0;i<e.length;i++){var a=e[i];a.type===G||a.type===J?!n&&!oe(t,a.value)?t.push(a.value):(r!==null&&(oe(t,r)||t.push(r)),r=a.value):a.type===te&&n&&r!==null?r+="."+a.value:a.type===P?Ze(a.value,t,s):r!==null&&(oe(t,r)||t.push(r),r=null)}r!==null&&!oe(t,r)&&t.push(r)}function _(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}_.prototype.simplify=function(e){return e=e||{},new _(ze(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)};_.prototype.substitute=function(e,t){return t instanceof _||(t=this.parser.parse(String(t))),new _(xt(this.tokens,e,t),this.parser)};_.prototype.evaluate=function(e){return e=e||{},Q(this.tokens,this,e)};_.prototype.toString=function(){return Je(this.tokens,!1)};_.prototype.symbols=function(e){e=e||{};var t=[];return Ze(this.tokens,t,e),t};_.prototype.variables=function(e){e=e||{};var t=[];Ze(this.tokens,t,e);var s=this.functions;return t.filter(function(n){return!(n in s)})};_.prototype.toJSFunction=function(e,t){var s=this,n=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+Je(this.simplify(t).tokens,!0)+"; }");return function(){return n.apply(s,arguments)}};var fe="TEOF",x="TOP",_e="TNUMBER",bt="TSTRING",K="TPAREN",de="TBRACKET",Le="TCOMMA",et="TNAME",tt="TSEMICOLON";function At(e,t,s){this.type=e,this.value=t,this.index=s}At.prototype.toString=function(){return this.type+": "+this.value};function C(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}C.prototype.newToken=function(e,t,s){return new At(e,t,s??this.pos)};C.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current};C.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent};C.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken(fe,"EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};C.prototype.isString=function(){var e=!1,t=this.pos,s=this.expression.charAt(t);if(s==="'"||s==='"')for(var n=this.expression.indexOf(s,t+1);n>=0&&this.pos<this.expression.length;){if(this.pos=n+1,this.expression.charAt(n-1)!=="\\"){var r=this.expression.substring(t+1,n);this.current=this.newToken(bt,this.unescape(r),t),e=!0;break}n=this.expression.indexOf(s,n+1)}return e};C.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return e==="("||e===")"?(this.current=this.newToken(K,e),this.pos++,!0):!1};C.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return(e==="["||e==="]")&&this.isOperatorEnabled("[")?(this.current=this.newToken(de,e),this.pos++,!0):!1};C.prototype.isComma=function(){var e=this.expression.charAt(this.pos);return e===","?(this.current=this.newToken(Le,","),this.pos++,!0):!1};C.prototype.isSemicolon=function(){var e=this.expression.charAt(this.pos);return e===";"?(this.current=this.newToken(tt,";"),this.pos++,!0):!1};C.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()&&(t===this.pos||s!=="_"&&s!=="."&&(s<"0"||s>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(n in this.consts)return this.current=this.newToken(_e,this.consts[n]),this.pos+=n.length,!0}return!1};C.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()&&(t===this.pos||s!=="_"&&(s<"0"||s>"9")))break}if(t>e){var n=this.expression.substring(e,t);if(this.isOperatorEnabled(n)&&(n in this.binaryOps||n in this.unaryOps||n in this.ternaryOps))return this.current=this.newToken(x,n),this.pos+=n.length,!0}return!1};C.prototype.isName=function(){for(var e=this.pos,t=e,s=!1;t<this.expression.length;t++){var n=this.expression.charAt(t);if(n.toUpperCase()===n.toLowerCase()){if(t===this.pos&&(n==="$"||n==="_")){n==="_"&&(s=!0);continue}else if(t===this.pos||!s||n!=="_"&&(n<"0"||n>"9"))break}else s=!0}if(s){var r=this.expression.substring(e,t);return this.current=this.newToken(et,r),this.pos+=r.length,!0}return!1};C.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);(t===" "||t==="	"||t===`
`||t==="\r")&&(e=!0,this.pos++,!(this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var es=/^[0-9a-f]{4}$/i;C.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var s=e.substring(0,t);t>=0;){var n=e.charAt(++t);switch(n){case"'":s+="'";break;case'"':s+='"';break;case"\\":s+="\\";break;case"/":s+="/";break;case"b":s+="\b";break;case"f":s+="\f";break;case"n":s+=`
`;break;case"r":s+="\r";break;case"t":s+="	";break;case"u":var r=e.substring(t+1,t+5);es.test(r)||this.parseError("Illegal escape sequence: \\u"+r),s+=String.fromCharCode(parseInt(r,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+n+'"')}++t;var i=e.indexOf("\\",t);s+=e.substring(t,i<0?e.length:i),t=i}return s};C.prototype.isComment=function(){var e=this.expression.charAt(this.pos);return e==="/"&&this.expression.charAt(this.pos+1)==="*"?(this.pos=this.expression.indexOf("*/",this.pos)+2,this.pos===1&&(this.pos=this.expression.length),!0):!1};C.prototype.isRadixInteger=function(){var e=this.pos;if(e>=this.expression.length-2||this.expression.charAt(e)!=="0")return!1;++e;var t,s;if(this.expression.charAt(e)==="x")t=16,s=/^[0-9a-f]$/i,++e;else if(this.expression.charAt(e)==="b")t=2,s=/^[01]$/i,++e;else return!1;for(var n=!1,r=e;e<this.expression.length;){var i=this.expression.charAt(e);if(s.test(i))e++,n=!0;else break}return n&&(this.current=this.newToken(_e,parseInt(this.expression.substring(r,e),t)),this.pos=e),n};C.prototype.isNumber=function(){for(var e=!1,t=this.pos,s=t,n=t,r=!1,i=!1,a;t<this.expression.length&&(a=this.expression.charAt(t),a>="0"&&a<="9"||!r&&a===".");)a==="."?r=!0:i=!0,t++,e=i;if(e&&(n=t),a==="e"||a==="E"){t++;for(var o=!0,p=!1;t<this.expression.length;){if(a=this.expression.charAt(t),o&&(a==="+"||a==="-"))o=!1;else if(a>="0"&&a<="9")p=!0,o=!1;else break;t++}p||(t=n)}return e?(this.current=this.newToken(_e,parseFloat(this.expression.substring(s,t))),this.pos=t):this.pos=n,e};C.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if(t==="+"||t==="-"||t==="*"||t==="/"||t==="%"||t==="^"||t==="?"||t===":"||t===".")this.current=this.newToken(x,t);else if(t==="∙"||t==="•")this.current=this.newToken(x,"*");else if(t===">")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(x,">="),this.pos++):this.current=this.newToken(x,">");else if(t==="<")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(x,"<="),this.pos++):this.current=this.newToken(x,"<");else if(t==="|")if(this.expression.charAt(this.pos+1)==="|")this.current=this.newToken(x,"||"),this.pos++;else return!1;else if(t==="=")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(x,"=="),this.pos++):this.current=this.newToken(x,t);else if(t==="!")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(x,"!="),this.pos++):this.current=this.newToken(x,t);else return!1;return this.pos++,this.isOperatorEnabled(this.current.value)?!0:(this.pos=e,!1)};C.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)};C.prototype.getCoordinates=function(){var e=0,t,s=-1;do e++,t=this.pos-s,s=this.expression.indexOf(`
`,s+1);while(s>=0&&s<this.pos);return{line:e,column:t}};C.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)};function b(e,t,s){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=s.allowMemberAccess!==!1}b.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()};b.prototype.tokenMatches=function(e,t){return typeof t>"u"?!0:Array.isArray(t)?oe(t,e.value):typeof t=="function"?t(e):e.value===t};b.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()};b.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken};b.prototype.accept=function(e,t){return this.nextToken.type===e&&this.tokenMatches(this.nextToken,t)?(this.next(),!0):!1};b.prototype.expect=function(e,t){if(!this.accept(e,t)){var s=this.tokens.getCoordinates();throw new Error("parse error ["+s.line+":"+s.column+"]: Expected "+(t||e))}};b.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;function s(r){return r.value in t}if(this.accept(et)||this.accept(x,s))e.push(new y(G,this.current.value));else if(this.accept(_e))e.push(new y(q,this.current.value));else if(this.accept(bt))e.push(new y(q,this.current.value));else if(this.accept(K,"("))this.parseExpression(e),this.expect(K,")");else if(this.accept(de,"["))if(this.accept(de,"]"))e.push(new y(le,0));else{var n=this.parseArrayList(e);e.push(new y(le,n))}else throw new Error("unexpected "+this.nextToken)};b.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),!this.parseUntilEndStatement(e,t)&&this.pushExpression(e,t))};b.prototype.pushExpression=function(e,t){for(var s=0,n=t.length;s<n;s++)e.push(t[s])};b.prototype.parseUntilEndStatement=function(e,t){return this.accept(tt)?(this.nextToken&&this.nextToken.type!==fe&&!(this.nextToken.type===K&&this.nextToken.value===")")&&t.push(new y(Be)),this.nextToken.type!==fe&&this.parseExpression(t),e.push(new y(P,t)),!0):!1};b.prototype.parseArrayList=function(e){for(var t=0;!this.accept(de,"]");)for(this.parseExpression(e),++t;this.accept(Le);)this.parseExpression(e),++t;return t};b.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(x,"=");){var t=e.pop(),s=[],n=e.length-1;if(t.type===ie){if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var r=0,i=t.value+1;r<i;r++){var a=n-r;e[a].type===G&&(e[a]=new y(J,e[a].value))}this.parseVariableAssignmentExpression(s),e.push(new y(P,s)),e.push(new y(Re,t.value));continue}if(t.type!==G&&t.type!==te)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(s),e.push(new y(J,t.value)),e.push(new y(P,s)),e.push(W("="))}};b.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(x,"?");){var t=[],s=[];this.parseConditionalExpression(t),this.expect(x,":"),this.parseConditionalExpression(s),e.push(new y(P,t)),e.push(new y(P,s)),e.push(wt("?"))}};b.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(x,"or");){var t=[];this.parseAndExpression(t),e.push(new y(P,t)),e.push(W("or"))}};b.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(x,"and");){var t=[];this.parseComparison(t),e.push(new y(P,t)),e.push(W("and"))}};var ts=["==","!=","<","<=",">=",">","in"];b.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(x,ts);){var t=this.current;this.parseAddSub(e),e.push(W(t.value))}};var ss=["+","-","||"];b.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(x,ss);){var t=this.current;this.parseTerm(e),e.push(W(t.value))}};var ns=["*","/","%"];b.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(x,ns);){var t=this.current;this.parseFactor(e),e.push(W(t.value))}};b.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;function s(r){return r.value in t}if(this.save(),this.accept(x,s)){if(this.current.value!=="-"&&this.current.value!=="+"){if(this.nextToken.type===K&&this.nextToken.value==="("){this.restore(),this.parseExponential(e);return}else if(this.nextToken.type===tt||this.nextToken.type===Le||this.nextToken.type===fe||this.nextToken.type===K&&this.nextToken.value===")"){this.restore(),this.parseAtom(e);return}}var n=this.current;this.parseFactor(e),e.push(qe(n.value))}else this.parseExponential(e)};b.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(x,"^");)this.parseFactor(e),e.push(W("^"))};b.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(x,"!");)e.push(qe("!"))};b.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;function s(i){return i.value in t}if(this.accept(x,s)){var n=this.current;this.parseAtom(e),e.push(qe(n.value))}else for(this.parseMemberExpression(e);this.accept(K,"(");)if(this.accept(K,")"))e.push(new y(ie,0));else{var r=this.parseArgumentList(e);e.push(new y(ie,r))}};b.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(K,")");)for(this.parseExpression(e),++t;this.accept(Le);)this.parseExpression(e),++t;return t};b.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(x,".")||this.accept(de,"[");){var t=this.current;if(t.value==="."){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(et),e.push(new y(te,this.current.value))}else if(t.value==="["){if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(de,"]"),e.push(W("["))}else throw new Error("unexpected symbol: "+t.value)}};function rs(e,t){return Number(e)+Number(t)}function as(e,t){return e-t}function os(e,t){return e*t}function is(e,t){return e/t}function ls(e,t){return e%t}function ds(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function us(e,t){return e===t}function cs(e,t){return e!==t}function ps(e,t){return e>t}function hs(e,t){return e<t}function fs(e,t){return e>=t}function ms(e,t){return e<=t}function gs(e,t){return!!(e&&t)}function ks(e,t){return!!(e||t)}function ys(e,t){return oe(t,e)}function Ts(e){return(Math.exp(e)-Math.exp(-e))/2}function vs(e){return(Math.exp(e)+Math.exp(-e))/2}function ws(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function xs(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function bs(e){return Math.log(e+Math.sqrt(e*e-1))}function As(e){return Math.log((1+e)/(1-e))/2}function ut(e){return Math.log(e)*Math.LOG10E}function Cs(e){return-e}function Es(e){return!e}function Ms(e){return e<0?Math.ceil(e):Math.floor(e)}function Is(e){return Math.random()*(e||1)}function ct(e){return st(e+1)}function Ss(e){return isFinite(e)&&e===Math.round(e)}var Os=4.7421875,We=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function st(e){var t,s;if(Ss(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var n=e-2,r=e-1;n>1;)r*=n,n--;return r===0&&(r=1),r}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*st(1-e));if(e>=171.35)return 1/0;if(e>85){var i=e*e,a=i*e,o=a*e,p=o*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*i)-139/(51840*a)-571/(2488320*o)+163879/(209018880*p)+5246819/(75246796800*p*e))}--e,s=We[0];for(var h=1;h<We.length;++h)s+=We[h]/(e+h);return t=e+Os+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*s}function Ds(e){return Array.isArray(e)?e.length:String(e).length}function pt(){for(var e=0,t=0,s=0;s<arguments.length;s++){var n=Math.abs(arguments[s]),r;t<n?(r=t/n,e=e*r*r+1,t=n):n>0?(r=n/t,e+=r*r):e+=n}return t===1/0?1/0:t*Math.sqrt(e)}function ht(e,t,s){return e?t:s}function Ns(e,t){return typeof t>"u"||+t==0?Math.round(e):(e=+e,t=-+t,isNaN(e)||!(typeof t=="number"&&t%1===0)?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function Us(e,t,s){return s&&(s[e]=t),t}function Fs(e,t){return e[t|0]}function js(e){return arguments.length===1&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function Ps(e){return arguments.length===1&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function Rs(e,t){if(typeof e!="function")throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(s,n){return e(s,n)})}function Bs(e,t,s){if(typeof e!="function")throw new Error("First argument to fold is not a function");if(!Array.isArray(s))throw new Error("Second argument to fold is not an array");return s.reduce(function(n,r,i){return e(n,r,i)},t)}function qs(e,t){if(typeof e!="function")throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(s,n){return e(s,n)})}function _s(e,t){if(!(Array.isArray(t)||typeof t=="string"))throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function Ls(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function Ys(e){return(e>0)-(e<0)||+e}var ft=1/3;function Vs(e){return e<0?-Math.pow(-e,ft):Math.pow(e,ft)}function $s(e){return Math.exp(e)-1}function Gs(e){return Math.log(1+e)}function Ks(e){return Math.log(e)/Math.LN2}function z(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||Ts,cosh:Math.cosh||vs,tanh:Math.tanh||ws,asinh:Math.asinh||xs,acosh:Math.acosh||bs,atanh:Math.atanh||As,sqrt:Math.sqrt,cbrt:Math.cbrt||Vs,log:Math.log,log2:Math.log2||Ks,ln:Math.log,lg:Math.log10||ut,log10:Math.log10||ut,expm1:Math.expm1||$s,log1p:Math.log1p||Gs,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||Ms,"-":Cs,"+":Number,exp:Math.exp,not:Es,length:Ds,"!":ct,sign:Math.sign||Ys},this.binaryOps={"+":rs,"-":as,"*":os,"/":is,"%":ls,"^":Math.pow,"||":ds,"==":us,"!=":cs,">":ps,"<":hs,">=":fs,"<=":ms,and:gs,or:ks,in:ys,"=":Us,"[":Fs},this.ternaryOps={"?":ht},this.functions={random:Is,fac:ct,min:Ps,max:js,hypot:Math.hypot||pt,pyt:Math.hypot||pt,pow:Math.pow,atan2:Math.atan2,if:ht,gamma:st,roundTo:Ns,map:Rs,fold:Bs,filter:qs,indexOf:_s,join:Ls},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}z.prototype.parse=function(e){var t=[],s=new b(this,new C(this,e),{allowMemberAccess:this.options.allowMemberAccess});return s.parseExpression(t),s.expect(fe,"EOF"),new _(t,this)};z.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Ct=new z;z.parse=function(e){return Ct.parse(e)};z.evaluate=function(e,t){return Ct.parse(e).evaluate(t)};var mt={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function Ws(e){return mt.hasOwnProperty(e)?mt[e]:e}z.prototype.isOperatorEnabled=function(e){var t=Ws(e),s=this.options.operators||{};return!(t in s)||!!s[t]};const zs=(e,t,s)=>{const{uniqueTags:n,uniqueCategories:r}=A.useMemo(()=>{const a=new Set,o=new Set;return e.forEach(p=>{p.tags.forEach(h=>a.add(h.name)),p.category&&o.add(p.category)}),{uniqueTags:Array.from(a),uniqueCategories:Array.from(o)}},[e]);return{processedTasks:A.useMemo(()=>{let a=[...e];if(t.tags.length>0&&(a=a.filter(o=>o.tags.some(p=>t.tags.includes(p.name)))),t.categories.length>0&&(a=a.filter(o=>o.category&&t.categories.includes(o.category))),t.priorities.length>0&&(a=a.filter(o=>t.priorities.includes(o.priority))),t.statuses.length>0&&(a=a.filter(o=>t.statuses.includes(o.status))),t.enableScript&&t.script.trim())try{const o=new z,p=o.parse(t.script);a=a.filter(h=>{try{return!!p.evaluate({task:h})}catch(f){return k.error("TaskFiltering","Custom filter script execution failed",f),!1}})}catch(o){k.error("TaskFiltering","Custom filter script parsing failed",o)}return a.sort((o,p)=>{if(s.field==="custom"){if(!s.script.trim())return 0;try{const w=new z,l=w.parse(s.script),d=l.evaluate({a:o,b:p});return typeof d=="number"?d:0}catch(w){return k.error("TaskFiltering","Custom sort script failed",w),0}}let h=o[s.field],f=p[s.field];if(s.field==="priority"){const w={high:3,medium:2,low:1};h=w[o.priority],f=w[p.priority]}return h==null&&(h=""),f==null&&(f=""),h<f?s.direction==="asc"?-1:1:h>f?s.direction==="asc"?1:-1:0}),a},[e,t,s]),uniqueTags:n,uniqueCategories:r}},Xs=e=>A.useMemo(()=>e.reduce((t,s)=>(s.status==="done"||s.status==="cancelled"||(s.status==="todo"&&t.todo++,s.status==="unplanned"&&t.unplanned++,s.status==="scheduled"&&t.scheduled++,s.status==="doing"&&t.doing++,(s.status==="overdue"||s.status==="due")&&t.urgent++),t),{todo:0,unplanned:0,urgent:0,scheduled:0,doing:0}),[e]),Hs=(e,t,s,n,r,i,a,o,p)=>{const h=A.useRef(e);A.useEffect(()=>{h.current=e},[e]);const f=async l=>{const d=l.args,j=h.current;switch(k.info("AI",`Executing tool: ${l.name}`,d),l.name){case"create_task":{const g={id:`ai-${Date.now()}-${Math.random().toString(36).slice(2,5)}`,title:d.title,description:d.description,status:"todo",priority:d.priority||"medium",createdAt:$t(),dueAt:d.dueAt||kt(),category:d.category,tags:d.tags?d.tags.map(T=>({id:`tag-${T}`,name:T})):[]};return await t(g),a("success","Task Created",`"${g.title}" added to your list.`),k.info("AI","Tool Result: Task Created",{id:g.id}),{success:!0,id:g.id,message:"Task created successfully"}}case"query_tasks":{let g=j;if(d.status&&(g=g.filter(T=>T.status===d.status)),d.date&&(g=g.filter(T=>{const B=["startAt","createdAt","completedAt","dueAt"];for(const E of B)if(T[E]&&T[E].startsWith(d.date))return!0;return!1})),d.search){const T=d.search.toLowerCase();g=g.filter(B=>B.title.toLowerCase().includes(T))}return k.debug("AI",`Tool Result: Query found ${g.length} tasks`),g.map(T=>({id:T.id,title:T.title,dueAt:T.dueAt,status:T.status}))}case"update_task":{const g=j.find(I=>I.id===d.id);if(!g)return a("error","Update Failed",`Could not find task with ID ${d.id}`),k.warn("AI","Tool Result: Update Failed (Not Found)",{id:d.id}),{success:!1,message:"Task not found"};const T=[];Object.keys(d).forEach(I=>{I!=="id"&&d[I]!==g[I]&&T.push(I)});const B={...g,...d};await s(B,g);const E=T.length>0?`Updated ${T.join(", ")}`:"Updated properties";return a("success","Task Updated",`${E} for "${g.title}"`),k.info("AI","Tool Result: Task Updated",{id:d.id,fields:T}),{success:!0,message:"Updated"}}case"delete_task":{const g=j.find(T=>T.id===d.id);return g?(await n(d.id,g),a("info","Task Deleted",`Removed "${g.title}"`),k.info("AI","Tool Result: Task Deleted",{id:d.id}),{success:!0,message:"Deleted"}):(a("error","Delete Failed",`Could not find task with ID ${d.id}`),k.warn("AI","Tool Result: Delete Failed (Not Found)",{id:d.id}),{success:!1,message:"Task not found"})}default:return k.error("AI",`Unknown tool called: ${l.name}`),{error:"Unknown tool"}}};return{handleAICommand:async l=>{const d=r.aiConfig.activeProvider,j=r.aiConfig.providers[d];try{const g=await Gt(d,j),T=Ht(),B=Qt(p,r.aiConfig.systemPrompt);k.info("AI",`Sending prompt to ${d}`,{input:l,model:j.model});let E=await g.chat(B,l,T);E.tokenCount&&o&&(o(E.tokenCount),k.debug("AI","Token Usage",{tokens:E.tokenCount}));let I=0;const Y=5,M=[{role:"user",content:l}];for(;E.toolCalls&&E.toolCalls.length>0&&I<Y;){I++,M.push({role:"assistant",content:E.text,toolCalls:E.toolCalls});const L=[];for(const X of E.toolCalls){if(!X.name)continue;const me=await f(X);L.push({id:X.id,name:X.name,result:me})}M.push({role:"tool",toolResults:L}),E=await g.chat(B,l,T,L,M),E.tokenCount&&o&&o(E.tokenCount)}}catch(g){k.error("AI","Agent processing failed",g),a("error","AI Agent Error",g instanceof Error?g.message:"Something went wrong while processing your request.")}}}},U={theme:"light",dateFormat:"MMM d",showCompleted:!0,showProgressBar:!0,soundEnabled:!1,fontSize:"base",useRelativeDates:!0,groupingStrategy:["dueAt"],aiConfig:{enabled:!0,defaultMode:!1,activeProvider:"gemini",providers:{gemini:{apiKey:"",model:"gemini-2.0-flash",baseUrl:""},openai:{apiKey:"",model:"gpt-4o",baseUrl:""},anthropic:{apiKey:"",model:"claude-sonnet-4-20250514",baseUrl:""},"openai-compatible":{apiKey:"",model:"",baseUrl:""}},systemPrompt:""},voiceConfig:{enabled:!0,activeProvider:"browser",language:"",providers:{browser:{},openai:{apiKey:"",baseUrl:"https://api.openai.com/v1/audio/transcriptions",model:"whisper-1"},gemini:{apiKey:"",model:"gemini-1.5-flash"}}},defaultFocusMode:!1,totalTokenUsage:0,defaultCategory:"General",settingButtonOnInputBar:void 0,filters:{tags:[],categories:[],priorities:[],statuses:[],enableScript:!1,script:""},sort:{field:"createdAt",direction:"asc",script:""}},Et=({className:e,tasks:t,onTaskAdded:s,onTaskUpdated:n,onTaskDeleted:r,settingsRepository:i,apiKey:a,systemInDarkMode:o,onItemClick:p,customSettingsTabs:h,renderTitle:f,aiSystemPrompt:w})=>{const[l,d]=A.useState(!1),[j,g]=A.useState(null),[T,B]=A.useState(null),[E,I]=A.useState([]),Y=A.useMemo(()=>i||new Jt,[i]),[M,L]=A.useState(()=>a?{...U,aiConfig:{...U.aiConfig,providers:{...U.aiConfig.providers,gemini:{...U.aiConfig.providers.gemini,apiKey:a}}}}:U),[X,me]=A.useState(!1),[ne,Ye]=A.useState(U.defaultFocusMode),[nt,ge]=A.useState(!1);A.useEffect(()=>{(async()=>{k.info("App","Loading settings...");try{const m=await Y.loadSettings();if(m){const v={...U,...m,aiConfig:{...U.aiConfig,...m.aiConfig||{},providers:{...U.aiConfig.providers,...m.aiConfig?.providers||{},...Object.fromEntries(Object.keys(U.aiConfig.providers).map(H=>[H,{...U.aiConfig.providers[H],...m.aiConfig?.providers?.[H]||{}}]))}},voiceConfig:{...U.voiceConfig,...m.voiceConfig||{},providers:{...U.voiceConfig.providers,...m.voiceConfig?.providers||{}}}},R=a?{...v,aiConfig:{...v.aiConfig,providers:{...v.aiConfig.providers,gemini:{...v.aiConfig.providers.gemini,apiKey:a}}}}:v;L(R),Ye(R.defaultFocusMode),ge(R.aiConfig.enabled&&R.aiConfig.defaultMode)}else ge(U.aiConfig.enabled&&U.aiConfig.defaultMode);me(!0)}catch(m){k.error("App","Failed to load settings",m),me(!0)}})()},[Y,a]),A.useEffect(()=>{X&&Y.saveSettings(M)},[M,Y,X]);const V=(c,m,v)=>{const R=Math.random().toString(36).slice(2,11);I(H=>[...H,{id:R,type:c,title:m,description:v}]),k.info("Notification",m,{type:c,description:v})},Mt=c=>{I(m=>m.filter(v=>v.id!==c))},It=c=>{L(m=>({...m,totalTokenUsage:m.totalTokenUsage+c}))},[re,Ve]=A.useState(M.filters),[rt,St]=A.useState(M.sort),Ot=A.useDeferredValue(re),ke=M.theme==="system"?o?"midnight":"light":M.theme;A.useEffect(()=>{k.info("App","system in dark mode: ",o),T&&(k.info("App","set theme on outer container: ",ke),T.setAttribute("data-theme",ke))},[ke,T,o]);const{processedTasks:Dt,uniqueTags:at,uniqueCategories:$e}=zs(t,Ot,rt),he=Xs(t),ot=async c=>{const m=t.find(R=>R.id===c.id);if(!m){console.warn(`Task ${c.id} not found`);return}const v={...c,status:lt(c)};k.info("Task","Updated task",{id:v.id,title:v.title});try{await n(v,m)}catch(R){k.error("Task","Failed to update task",{error:R}),V("error","Update Failed","Could not save changes")}},Nt=async c=>{const m=t.find(v=>v.id===c);if(!m){console.warn(`Task ${c} not found`);return}V("info","Task Deleted","Item removed from your list"),k.info("Task","Deleted task",{id:c});try{await r(c,m)}catch(v){k.error("Task","Failed to delete task",{error:v}),V("error","Delete Failed","Could not remove task")}},Ut=c=>{ot(c),g(null)},it=async(c,m)=>{let v;const R={id:`new-${Date.now()}-${Math.random().toString(36).slice(2,9)}`,status:"todo",createdAt:new Date().toISOString(),priority:"medium",tags:[],category:M.defaultCategory};if(typeof c=="string"&&m)v={...R,title:m,dueAt:c};else if(typeof c=="object")v={...R,title:"New Task",...c},v.title||(v.title="Untitled Task");else return;v.status=lt(v),k.info("Task","Created task",{id:v.id,title:v.title});try{await s(v)}catch(H){k.error("Task","Failed to add task",{error:H}),V("error","Add Failed","Could not create task")}},{handleAICommand:Ft}=Hs(t,s,n,r,M,it,V,It,w),ye=c=>{const m=c.every(v=>re.statuses.includes(v))&&re.statuses.length===c.length;Ve(v=>({...v,statuses:m?[]:c}))},Te=c=>c.every(m=>re.statuses.includes(m))&&re.statuses.length===c.length,jt=c=>{V("error","Voice Input Error",c),k.error("Voice",c)};return u.jsx("div",{ref:B,className:ae("tasks-timeline-app bg-paper text-slate-900 font-sans selection:bg-rose-100 selection:text-rose-900 transition-colors duration-300 antialiased",e),children:u.jsx(Lt,{theme:ke,children:u.jsx(Yt,{value:{tasks:Dt,availableCategories:$e,availableTags:at,onUpdateTask:ot,onDeleteTask:Nt,onAddTask:it,onEditTask:g,onAICommand:Ft,onItemClick:p,renderTitle:f},children:u.jsx(Vt,{value:{settings:M,updateSettings:c=>L(m=>({...m,...c})),isFocusMode:ne,toggleFocusMode:()=>Ye(!ne),isAiMode:nt,toggleAiMode:()=>ge(!nt),filters:re,onFilterChange:Ve,sort:rt,onSortChange:St,onVoiceError:jt,onOpenSettings:M.settingButtonOnInputBar===!1?void 0:()=>d(!0)},children:u.jsxs("div",{className:"max-w-3xl mx-auto min-h-screen bg-white shadow-xl shadow-slate-200/50 border-x border-slate-100 pb-10 relative",children:[u.jsxs("div",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-md border-b border-slate-200/60 shadow-sm transition-all duration-300",children:[u.jsx(Ke,{FallbackComponent:Tt,onError:(c,m)=>{k.error("InputBar","Error caught by boundary",{error:c,info:m}),V("error","Input Error",c instanceof Error?c.message:String(c))},onReset:()=>{ge(!1)},children:u.jsx(Rt,{})}),u.jsx("div",{className:"px-4 sm:px-6 pb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("button",{onClick:()=>Ye(!ne),className:ae("rounded-lg p-2 flex flex-col items-center justify-center border w-20 shrink-0 transition-all",ne?"bg-purple-100 border-purple-400 text-purple-700 shadow-inner":"bg-slate-50 border-slate-100 text-slate-400 hover:text-slate-600 hover:border-slate-200"),title:ne?"Turn Off Focus Mode":"Turn On Focus Mode",children:[u.jsx(Pe,{name:ne?"Minimize2":"Target",size:20,className:"mb-0.5"}),u.jsx("span",{className:"text-[9px] font-bold uppercase tracking-wider truncate w-full text-center",children:"Focus"})]}),u.jsxs("div",{className:"grid grid-cols-4 gap-2 flex-1",children:[u.jsxs("button",{onClick:()=>ye(["todo"]),className:ae("rounded-lg p-2 flex flex-col items-center justify-center border",Te(["todo"])?"bg-slate-100 border-slate-400":"bg-slate-50 border-slate-100"),children:[u.jsx("span",{className:"text-lg font-black text-slate-800 leading-none",children:he.todo}),u.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-wider mt-1 truncate w-full text-center",children:"To Do"})]}),u.jsxs("button",{onClick:()=>ye(["unplanned"]),className:ae("rounded-lg p-2 flex flex-col items-center justify-center border",Te(["unplanned"])?"bg-purple-100 border-purple-400":"bg-purple-50 border-purple-100"),children:[u.jsx("span",{className:"text-lg font-black text-purple-600 leading-none",children:he.unplanned}),u.jsx("span",{className:"text-[9px] font-bold text-purple-400 uppercase tracking-wider mt-1 truncate w-full text-center",children:"Unplanned"})]}),u.jsxs("button",{onClick:()=>ye(["due","overdue"]),className:ae("rounded-lg p-2 flex flex-col items-center justify-center border",Te(["due","overdue"])?"bg-rose-100 border-rose-400":"bg-rose-50 border-rose-100"),children:[u.jsx("span",{className:"text-lg font-black text-rose-600 leading-none",children:he.urgent}),u.jsx("span",{className:"text-[9px] font-bold text-rose-400 uppercase tracking-wider mt-1 truncate w-full text-center",children:"Due & OD"})]}),u.jsxs("button",{onClick:()=>ye(["scheduled","doing"]),className:ae("rounded-lg p-2 flex flex-col items-center justify-center border",Te(["scheduled","doing"])?"bg-blue-100 border-blue-400":"bg-blue-50 border-blue-100"),children:[u.jsx("span",{className:"text-lg font-black text-blue-600 leading-none",children:he.scheduled+he.doing}),u.jsx("span",{className:"text-[9px] font-bold text-blue-400 uppercase tracking-wider mt-1 truncate w-full text-center",children:"Doing"})]})]})]})})]}),u.jsx("main",{className:"px-4 sm:px-6 pt-6",children:u.jsx(Ke,{FallbackComponent:yt,onError:(c,m)=>{k.error("TodoList","Error caught by boundary",{error:c,info:m}),V("error","Task List Error",c instanceof Error?c.message:String(c))},onReset:()=>{Ve({tags:[],categories:[],priorities:[],statuses:[],script:"",enableScript:!1})},children:u.jsx(Pt,{})})}),u.jsx("footer",{className:"mt-10 py-6 text-center text-slate-400 text-xs border-t border-slate-50",children:u.jsx("p",{children:"Timeline Tasks View"})}),u.jsx("div",{className:"fixed bottom-6 right-6 z-50 flex flex-col gap-2 pointer-events-none",children:u.jsx(Kt,{children:E.map(c=>u.jsx(_t,{toast:c,onDismiss:Mt},c.id))})}),u.jsx(Bt,{isOpen:l,onClose:()=>d(!1),settings:M,onUpdateSettings:L,availableTags:at,availableCategories:$e,customTabs:h}),u.jsx(Ke,{FallbackComponent:vt,onError:(c,m)=>{k.error("TaskEditModal","Error in modal",{error:c,info:m}),V("error","Failed to Edit Task",c instanceof Error?c.message:String(c))},onReset:()=>{g(null)},children:u.jsx(qt,{isOpen:!!j,onClose:()=>g(null),task:j,onSave:Ut,availableCategories:$e})})]})})})})})};Et.__docgenInfo={description:"",methods:[],displayName:"TasksTimelineApp",props:{className:{required:!1,tsType:{name:"string"},description:""},tasks:{required:!0,tsType:{name:"Array",elements:[{name:"Task"}],raw:"Task[]"},description:""},onTaskAdded:{required:!0,tsType:{name:"signature",type:"function",raw:"(task: Task) => void | Promise<void>",signature:{arguments:[{type:{name:"Task"},name:"task"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},onTaskUpdated:{required:!0,tsType:{name:"signature",type:"function",raw:"(task: Task, previous: Task) => void | Promise<void>",signature:{arguments:[{type:{name:"Task"},name:"task"},{type:{name:"Task"},name:"previous"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},onTaskDeleted:{required:!0,tsType:{name:"signature",type:"function",raw:"(taskId: string, previous: Task) => void | Promise<void>",signature:{arguments:[{type:{name:"string"},name:"taskId"},{type:{name:"Task"},name:"previous"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},settingsRepository:{required:!1,tsType:{name:"SettingsRepository"},description:""},apiKey:{required:!1,tsType:{name:"string"},description:""},systemInDarkMode:{required:!1,tsType:{name:"boolean"},description:""},onItemClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: Task) => void",signature:{arguments:[{type:{name:"Task"},name:"item"}],return:{name:"void"}}},description:""},customSettingsTabs:{required:!1,tsType:{name:"Array",elements:[{name:"CustomSettingsTab"}],raw:"CustomSettingsTab[]"},description:"Custom tabs to inject into the Settings page"},renderTitle:{required:!1,tsType:{name:"signature",type:"function",raw:"(title: string) => React.ReactNode",signature:{arguments:[{type:{name:"string"},name:"title"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:"Custom renderer for task titles. When provided, replaces the default plain-text display."},aiSystemPrompt:{required:!1,tsType:{name:"string"},description:"Additional system prompt injected by the host application"}}};const{expect:se}=__STORYBOOK_MODULE_TEST__,Rn={title:"Core/TasksTimelineApp",component:Et,tags:["autodocs"],parameters:{layout:"fullscreen"},argTypes:{onItemClick:{action:"item-clicked"},onTaskAdded:{action:"task-added"},onTaskUpdated:{action:"task-updated"},onTaskDeleted:{action:"task-deleted"}}},S=Wt.mixed(10),F=e=>console.log("Clicked item:",e),O=e=>console.log("Task added:",e),D=(e,t)=>console.log("Task updated:",e,"Previous:",t),N=(e,t)=>console.log("Task deleted:",e,"Previous:",t),ve={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F}},we={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F},play:async({canvasElement:e,step:t})=>{const s=Z(e);await t("Verify app is rendered",async()=>{await ee(500);const n=s.queryAllByRole("textbox");se(n.length).toBeGreaterThan(0)})}},xe={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,className:"custom-app-class",onItemClick:F}},be={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,apiKey:"test-gemini-api-key",onItemClick:F}},Ae={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,systemInDarkMode:!0,onItemClick:F},parameters:{backgrounds:{default:"dark"}}},Ce={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,systemInDarkMode:!1,onItemClick:F},parameters:{backgrounds:{default:"light"}}},Ee={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F},play:async({canvasElement:e,step:t})=>{const s=Z(e);await t("Find and click settings button",async()=>{await ee(500);const n=s.getAllByRole("button");se(n.length).toBeGreaterThan(0)})}},Me={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F},play:async({canvasElement:e,step:t})=>{const s=Z(e);await t("Find Focus mode toggle",async()=>{await ee(500);const n=s.getAllByRole("button");se(n.length).toBeGreaterThan(0)})}},Ie={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F},play:async({canvasElement:e,step:t})=>{const s=Z(e);await t("Find status filter buttons",async()=>{await ee(500);const n=s.getAllByRole("button");se(n.length).toBeGreaterThan(3)})}},Se={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F},play:async({canvasElement:e,step:t})=>{const s=Z(e);await t("Find input bar",async()=>{await ee(500);const n=s.queryAllByRole("textbox");se(n.length).toBeGreaterThan(0)})}},Oe={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F},play:async({canvasElement:e,step:t})=>{const s=Z(e);await t("Verify scrollable content",async()=>{await ee(500);const n=s.queryAllByRole("button");se(n.length).toBeGreaterThan(0)})}},De={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F},play:async({canvasElement:e,step:t})=>{const s=Z(e);await t("Verify dashboard stats are visible",async()=>{await ee(500);const n=s.getAllByRole("button");se(n.length).toBeGreaterThan(3)})}},Ne={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N}},Ue={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,apiKey:"",onItemClick:F}},Fe={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,onItemClick:F,renderTitle:e=>e.toUpperCase()}},je={args:{tasks:S,onTaskAdded:O,onTaskUpdated:D,onTaskDeleted:N,className:"very-long-custom-class-name-that-might-cause-issues-but-should-still-work",onItemClick:F}};ve.parameters={...ve.parameters,docs:{...ve.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  }
}`,...ve.parameters?.docs?.source}}};we.parameters={...we.parameters,docs:{...we.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = withinShadow(canvasElement);
    await step("Verify app is rendered", async () => {
      await delay(500);
      // Should have input bar
      const inputs = canvas.queryAllByRole("textbox");
      expect(inputs.length).toBeGreaterThan(0);
    });
  }
}`,...we.parameters?.docs?.source}}};xe.parameters={...xe.parameters,docs:{...xe.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    className: "custom-app-class",
    onItemClick: handleItemClick
  }
}`,...xe.parameters?.docs?.source}}};be.parameters={...be.parameters,docs:{...be.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    apiKey: "test-gemini-api-key",
    onItemClick: handleItemClick
  }
}`,...be.parameters?.docs?.source}}};Ae.parameters={...Ae.parameters,docs:{...Ae.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    systemInDarkMode: true,
    onItemClick: handleItemClick
  },
  parameters: {
    backgrounds: {
      default: "dark"
    }
  }
}`,...Ae.parameters?.docs?.source}}};Ce.parameters={...Ce.parameters,docs:{...Ce.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    systemInDarkMode: false,
    onItemClick: handleItemClick
  },
  parameters: {
    backgrounds: {
      default: "light"
    }
  }
}`,...Ce.parameters?.docs?.source}}};Ee.parameters={...Ee.parameters,docs:{...Ee.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = withinShadow(canvasElement);
    await step("Find and click settings button", async () => {
      await delay(500); // Wait for app to initialize
      const buttons = canvas.getAllByRole("button");
      // Settings button should be among the buttons
      expect(buttons.length).toBeGreaterThan(0);
    });
  }
}`,...Ee.parameters?.docs?.source}}};Me.parameters={...Me.parameters,docs:{...Me.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = withinShadow(canvasElement);
    await step("Find Focus mode toggle", async () => {
      await delay(500);
      const buttons = canvas.getAllByRole("button");
      // Should have Focus button
      expect(buttons.length).toBeGreaterThan(0);
    });
  }
}`,...Me.parameters?.docs?.source}}};Ie.parameters={...Ie.parameters,docs:{...Ie.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = withinShadow(canvasElement);
    await step("Find status filter buttons", async () => {
      await delay(500);
      // Should have To Do, Unplanned, Due & OD, Doing buttons
      const buttons = canvas.getAllByRole("button");
      expect(buttons.length).toBeGreaterThan(3);
    });
  }
}`,...Ie.parameters?.docs?.source}}};Se.parameters={...Se.parameters,docs:{...Se.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = withinShadow(canvasElement);
    await step("Find input bar", async () => {
      await delay(500);
      const inputs = canvas.queryAllByRole("textbox");
      // Should have task input field
      expect(inputs.length).toBeGreaterThan(0);
    });
  }
}`,...Se.parameters?.docs?.source}}};Oe.parameters={...Oe.parameters,docs:{...Oe.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = withinShadow(canvasElement);
    await step("Verify scrollable content", async () => {
      await delay(500);
      // App should render with buttons and input
      const buttons = canvas.queryAllByRole("button");
      expect(buttons.length).toBeGreaterThan(0);
    });
  }
}`,...Oe.parameters?.docs?.source}}};De.parameters={...De.parameters,docs:{...De.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick
  },
  play: async ({
    canvasElement,
    step
  }) => {
    const canvas = withinShadow(canvasElement);
    await step("Verify dashboard stats are visible", async () => {
      await delay(500);
      const buttons = canvas.getAllByRole("button");
      // Should show stat cards (To Do, Unplanned, Due & OD, Doing)
      expect(buttons.length).toBeGreaterThan(3);
    });
  }
}`,...De.parameters?.docs?.source}}};Ne.parameters={...Ne.parameters,docs:{...Ne.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted
    // OnItemClick is optional, should work without it
  }
}`,...Ne.parameters?.docs?.source}}};Ue.parameters={...Ue.parameters,docs:{...Ue.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    apiKey: "",
    onItemClick: handleItemClick
  }
}`,...Ue.parameters?.docs?.source}}};Fe.parameters={...Fe.parameters,docs:{...Fe.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    onItemClick: handleItemClick,
    renderTitle: (title: string) => title.toUpperCase()
  }
}`,...Fe.parameters?.docs?.source}}};je.parameters={...je.parameters,docs:{...je.parameters?.docs,source:{originalSource:`{
  args: {
    tasks: mockTasks,
    onTaskAdded: handleTaskAdded,
    onTaskUpdated: handleTaskUpdated,
    onTaskDeleted: handleTaskDeleted,
    className: "very-long-custom-class-name-that-might-cause-issues-but-should-still-work",
    onItemClick: handleItemClick
  }
}`,...je.parameters?.docs?.source}}};const Bn=["App","WithItemClick","WithCustomClassName","WithAPIKey","SystemDarkMode","SystemLightMode","OpenSettings","ToggleFocusMode","FilterByStatus","AddNewTask","ScrollTasks","ViewTaskStats","NoOnItemClick","EmptyAPIKey","WithCustomRenderTitle","VeryLongClassName"];export{Se as AddNewTask,ve as App,Ue as EmptyAPIKey,Ie as FilterByStatus,Ne as NoOnItemClick,Ee as OpenSettings,Oe as ScrollTasks,Ae as SystemDarkMode,Ce as SystemLightMode,Me as ToggleFocusMode,je as VeryLongClassName,De as ViewTaskStats,be as WithAPIKey,xe as WithCustomClassName,Fe as WithCustomRenderTitle,we as WithItemClick,Bn as __namedExportsOrder,Rn as default};
